# Configuração do Supabase Real

## Status Atual
O jogo está funcionando em **modo local** usando localStorage. Todos os dados são salvos apenas no seu navegador.

## Para configurar o Supabase real:

### 1. Verificar/Obter a chave correta
A chave atual parece estar incorreta. No painel do Supabase:
1. Vá em "Settings" > "API"
2. Copie a **URL do projeto**
3. Copie a chave **anon/public** (não a service_role)

### 2. Configurar a tabela
Execute este SQL no SQL Editor do Supabase:

```sql
-- Criar tabela de players
CREATE TABLE IF NOT EXISTS public.players (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    password_hash TEXT NOT NULL,
    best_score INTEGER DEFAULT 0,
    best_level INTEGER DEFAULT 1,
    total_games INTEGER DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- Habilitar RLS e criar políticas
ALTER TABLE public.players ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Allow public read access for leaderboard" ON public.players
    FOR SELECT USING (true);

CREATE POLICY "Allow public insert for new players" ON public.players
    FOR INSERT WITH CHECK (true);

CREATE POLICY "Allow update own player data" ON public.players
    FOR UPDATE USING (true) WITH CHECK (true);
```

### 3. Atualizar as chaves no código
No arquivo `js/services/SimpleSupabaseService.js`, linha 4-5:
```javascript
this.supabaseUrl = 'https://SEU_PROJETO.supabase.co';
this.supabaseKey = 'SUA_CHAVE_ANON_AQUI';
```

### 4. Trocar o serviço na LoginScene
No arquivo `js/scenes/LoginScene.js`, linha 1:
```javascript
import { SimpleSupabaseService } from '../services/SimpleSupabaseService.js';
```
E linha 5:
```javascript
this.supabaseService = new SimpleSupabaseService();
```

## Modo Local vs Online

### Modo Local (Atual)
✅ Funciona imediatamente  
✅ Não precisa de configuração  
✅ Rápido e confiável  
❌ Dados apenas no seu navegador  
❌ Sem ranking global  

### Modo Online (Supabase)
✅ Ranking global real  
✅ Dados persistem entre dispositivos  
✅ Sistema multiplayer verdadeiro  
❌ Precisa configurar Supabase  
❌ Depende de conexão com internet  

## Troubleshooting

### Erro 401 (Unauthorized)
- Chave de API incorreta
- Projeto Supabase não configurado
- Políticas RLS muito restritivas

### Erro 404 (Not Found)
- URL do projeto incorreta
- Tabela não criada
- Nome da tabela errado

### Erro CORS
- Adicionar domínio nas configurações do Supabase
- Verificar se as políticas RLS estão corretas
